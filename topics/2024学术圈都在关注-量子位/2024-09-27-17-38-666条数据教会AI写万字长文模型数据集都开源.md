# 666æ¡æ•°æ®æ•™ä¼šAIå†™ä¸‡å­—é•¿æ–‡ï¼æ¨¡å‹æ•°æ®é›†éƒ½å¼€æº

æ–‡ç« ä½œè€…: é‡å­ä½
å‘å¸ƒæ—¶é—´: 2024-09-27 17:38
å‘å¸ƒåœ°: æœªçŸ¥åœ°åŒº
åŸæ–‡é“¾æ¥: http://mp.weixin.qq.com/s?__biz=MzIzNjc1NzUzMw==&mid=2247751369&idx=4&sn=3259c46c37f0ced5518675094ef62a98&chksm=e8dfa1bbdfa828addc3d8194585bdf36e46e285e85ca2deae78230dae8017acd0d1b3ddbf2f5#rd

å°é¢å›¾é“¾æ¥: https://mmbiz.qpic.cn/mmbiz_jpg/YicUhk5aAGtDfN365G5W4jOorsPW93ogUYPNrTzdGhGTv5GYyaXciadCys1hfrc3yFm70130bsZOOwvhn23poLDg/300

##### é­”æ­ModelScopeå›¢é˜Ÿ æŠ•ç¨¿  
é‡å­ä½ | å…¬ä¼—å· QbitAI

ä»…éœ€**600å¤šæ¡æ•°æ®** ï¼Œå°±èƒ½è®­ç»ƒè‡ªå·±çš„é•¿è¾“å‡ºæ¨¡å‹äº†ï¼Ÿï¼

äº‹æƒ…æ˜¯é…±å©¶å„¿çš„â€”â€”

è™½ç„¶å¤§æ¨¡å‹çš„ä¸Šä¸‹æ–‡(Context)æ”¯æŒè¶Šæ¥è¶Šé•¿ï¼Œä½†åŒ…æ‹¬GPT-4oï¼ŒLlama-3.1-70Bï¼ŒClaude 3.5
Sonnetåœ¨å†…çš„è¿™äº›ä¸šç•Œé¢†å…ˆæ¨¡å‹ï¼Œåœ¨ç”¨æˆ·æŒ‡å®šæ‰€éœ€è¾“å‡ºé•¿åº¦çš„æƒ…å†µä¸‹ï¼Œå…¶æœ€å¤§è¾“å‡ºé•¿åº¦ä»æ— æ³•æ»¡è¶³è¦æ±‚ã€‚

> ä¾‹å¦‚ï¼Œé’ˆå¯¹â€œå†™ä¸€ç¯‡å…³äºç½—é©¬å¸å›½å†å²çš„10000å­—æ–‡ç« â€çš„è¦æ±‚ï¼Œæ‰€æœ‰è¿™äº›é€šç”¨æ¨¡å‹åœ¨è¾“å‡ºé•¿åº¦ä¸Šå‡æ— æ³•è¶…è¿‡2000å­—ã€‚

å¯¹æ­¤ï¼ŒåŸºäº**GLM4-9B** ï¼Œæ™ºè°±é€šè¿‡æ„å»ºé•¿è¾“å‡ºçš„è®­ç»ƒæ•°æ®å¾—åˆ°äº†**LongWriter-GLM4-9B** æ¨¡å‹ï¼Œèƒ½å¤Ÿåº”å¯¹è¶…é•¿è¾“å‡ºï¼ˆ10000+
wordsï¼‰åœºæ™¯ã€‚

ä¸æ­¤åŒæ—¶ï¼Œæ™ºè°±å¼€æºäº†è®­ç»ƒè¯¥æ¨¡å‹æ‰€éœ€çš„é•¿è¾“å‡ºæ–‡æœ¬æ•°æ®é›†LongWriter-6Kã€‚

ç°åœ¨ï¼Œé­”æ­ç¤¾åŒºä¸ŠåŸºäºLongWriter-6Kè¿‡æ»¤ç²¾é€‰äº†**666æ¡æ•°æ®** ï¼ˆLongWriter-6K-Filteredï¼‰ï¼Œä¹Ÿä¸€å¹¶å¼€æºäº†ã€‚

æœ‰å•¥ç”¨ï¼Ÿï¼Ÿ

ä¸€å¥è¯ï¼Œä½¿ç”¨è¯¥æ•°æ®é›†ï¼Œä½ å°±èƒ½åœ¨è‡ªå·±çš„æ¨¡å‹ä¸­é›†æˆé•¿è¾“å‡ºèƒ½åŠ›äº†ã€‚

![](https://mmbiz.qpic.cn/mmbiz_jpg/YicUhk5aAGtDfN365G5W4jOorsPW93ogUMZibOaU9y7Jia8Y8Vz5NC9xqHibDT7KdSyOr1CARzebvmDOx7c9HKYCVA/640?wx_fmt=jpeg&from=appmsg)

## LongWriteræ•°æ®ç”Ÿæˆä¸æ¨¡å‹è®­ç»ƒ

é€šè¿‡åˆ†æè®­ç»ƒSFTæ•°æ®ï¼Œå›¢é˜Ÿå‘ç°å¯¹äºâ€œæ¨¡å‹æ— æ³•è¾“å‡ºè¾ƒé•¿æ–‡æœ¬â€çš„ä¸€ä¸ªåˆç†è§£é‡Šä¸ºï¼š

> **æ¨¡å‹æ‰€èƒ½ç”Ÿæˆçš„æœ€å¤§é•¿åº¦ï¼Œä¼šå—é™äºå…¶SFTæ•°æ®ä¸­å­˜åœ¨çš„è¾“å‡ºé•¿åº¦ä¸Šé™ã€‚**

ä»¥GLM4-9B-Chatæ¨¡å‹ä¸ºä¾‹ï¼Œå…¶SFTè®­ç»ƒä½¿ç”¨çš„180Kæ¡chatæ•°æ®ä¸­ï¼Œè¾“å‡ºé•¿åº¦è¶…è¿‡500ã€1,000å’Œ2,000å­—çš„æ•°æ®ï¼Œåˆ†åˆ«ä»…å SFTæ•°æ®é‡å¤§çš„28%ã€2%å’Œ0.1%ã€‚

å¯è§ï¼Œ**é•¿è¾“å‡ºé•¿åº¦çš„è®­ç»ƒæ•°æ®å æ¯”è¾ƒå°** ï¼Œè€Œ2000å­—é•¿åº¦ä»¥ä¸Šçš„æ•°æ®æ ·æœ¬å æ¯”æ›´æ˜¯å¾®ä¹å…¶å¾®ã€‚

æœ‰äº†è¿™ä¸ªåˆ†æï¼ŒLongWriter-GLM-9Bæ˜¯æ™ºè°±åŸºäºGLM4-9Bæ¨¡å‹ï¼Œé€šè¿‡æ„å»ºé•¿è¾“å‡ºçš„è®­ç»ƒæ•°æ®è€Œå¾—åˆ°çš„æ¨¡å‹ï¼Œåœ¨è¾“å‡ºé•¿æ–‡æ–¹é¢è¡¨ç°çªå‡ºã€‚

åœ¨LongWriterå·¥ä½œçš„åŸºç¡€ä¸Šï¼Œå›¢é˜Ÿåˆ©ç”¨ç¤¾åŒºçš„Swiftå¾®è°ƒè®­ç»ƒå·¥å…·å’ŒEvalScopeè¯„ä¼°æ¡†æ¶ï¼Œè¿›ä¸€æ­¥æ¢ç´¢äº†åœ¨æ‰©å±•æ¨¡å‹è¾“å‡ºé•¿åº¦è¿™ä¸ªä»»åŠ¡ä¸Šï¼Œ**é«˜è´¨é‡æ•°æ®**
å¯¹äºæ¨¡å‹è´¨é‡çš„é‡è¦æ€§ã€‚  

åŒæ—¶ï¼Œå°†è¿™ä¸ªæ¨¡å‹è®­ç»ƒçš„receiptï¼Œæ‰©å±•åˆ°å…¶ä»–æ¨¡å‹ï¼ˆä¾‹å¦‚Qwen2ï¼‰ä¸Šã€‚

åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå›¢é˜Ÿè¿˜åˆ†äº«äº†ä¸€äº›æœ‰è¶£çš„å‘ç°å’Œå®è·µç»éªŒï¼š

**aï¼‰å°‘å³æ˜¯å¤šï¼šæ•°æ®è´¨é‡æ¯”æ•°æ®æ•°é‡æ›´å…³é”®ã€‚**

é€šè¿‡å¯¹æ•°æ®çš„åˆ†æè¿‡æ»¤ï¼Œå›¢é˜Ÿå‘ç°LongWriter-6Kçš„6000æ¡æ•°æ®ï¼Œä¾ç„¶å­˜åœ¨ä¼˜åŒ–ç©ºé—´ã€‚

ä»–ä»¬ä»ä¸­é€‰å‡ºäº†**10%å·¦å³** ï¼ˆ666æ¡ï¼‰çš„é«˜è´¨é‡æ•°æ®å¹¶åŸºäºè¿™äº›æ•°æ®åšå¾®è°ƒè®­ç»ƒã€‚

åœ¨Qwen2-7b-instructå’ŒGLM4-9B-Chatä¸¤ä¸ªæ¨¡å‹ä¸Šï¼Œåªéœ€è¦**3.7%** è®­ç»ƒè®¡ç®—æ¶ˆè€—ï¼Œå°±èƒ½è·å–å’ŒåŸè®ºæ–‡ä¸­ï¼ŒLongWriter-
GLM-9Bç±»ä¼¼çš„æ€§èƒ½æå‡ã€‚

æ­¤å¤–ï¼Œéšç€åŸºç¡€æ¨¡å‹çš„å‡çº§ï¼Œæ”¯æŒé•¿è¾“å‡ºè¿™ä¸ªèƒ½åŠ›ï¼Œåœ¨æ–°è¿­ä»£ä¸­æœ¬èº«ä¹Ÿä¼šæœ‰æ‰€å¢å¼ºã€‚ä½†LongWriterçš„æŠ€æœ¯æ–¹æ¡ˆï¼Œè¿˜æ˜¯æœ‰å…¶é€‚ç”¨æ€§ã€‚ä¾‹å¦‚åœ¨æ–°é²œå‡ºç‚‰çš„Qwen2.5æ¨¡å‹ä¸Šï¼Œå›¢é˜Ÿé€šè¿‡ç¬¬ä¸€æ—¶é—´çš„æµ‹è¯•å’ŒéªŒè¯å‘ç°ï¼Œä¸€æ–¹é¢Qwen2.5æ¨¡å‹æœ¬èº«åœ¨æ–‡æœ¬ç”Ÿæˆé•¿åº¦ä¸Šï¼Œå·²ç»æœ‰äº†é•¿è¶³è¿›æ­¥ï¼Œä½†åŒæ ·çš„è®­ç»ƒå¾®è°ƒæ–¹æ¡ˆï¼Œè¿˜æ˜¯èƒ½è¿›ä¸€æ­¥å¸¦æ¥å¾ˆå¥½çš„ä»»åŠ¡èƒ½åŠ›æå‡ã€‚

**bï¼‰å¯¹äºæå‡è¾“å‡ºæ–‡æœ¬é•¿åº¦è¿™ä¸ªå…·ä½“ä»»åŠ¡ï¼Œä»baseæ¨¡å‹å¼€å§‹SFTä¼¼ä¹ä¸æ˜¯å¿…é¡»çš„ã€‚**

ä»¥å¯¹é½ç‰ˆæœ¬(chat/instruct)æ¨¡å‹ä¸ºèµ·ç‚¹ï¼Œåœ¨æ¨¡å‹è¾“å‡ºè´¨é‡å’Œè¾“å‡ºé•¿åº¦ä¸¤æ–¹é¢ï¼Œä¹Ÿéƒ½èƒ½è·å–è¾ƒå¥½çš„æ•ˆæœã€‚

ä¸‹é¢æ¥çœ‹å›¢é˜Ÿå¯¹æ•°æ®çš„å¤„ç†ã€‚

#### LongWriter-6Kæ•°æ®

LongWriter-6Kæ•°æ®æ˜¯é€šè¿‡**AgentWriterç”Ÿæˆ** ï¼Œä¹Ÿå°±æ˜¯å°†é•¿æ–‡å†™ä½œä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªå­ä»»åŠ¡ï¼Œæ¯ä¸ªå­ä»»åŠ¡è´Ÿè´£æ’°å†™ä¸€æ®µã€‚

å®éªŒå‘ç°ï¼Œåœ¨**GPT-4oä¸Š** ä½¿ç”¨AgentWriterç­–ç•¥ï¼Œèƒ½å¤Ÿå¾—åˆ°è¿‘ä¹çº¿æ€§çš„Output
Lengthï¼Œä¸”é•¿åº¦è¿œè¶…2000è¯ï¼Œç”šè‡³å¯ä»¥è¾¾åˆ°30000è¯çš„é‡çº§ã€‚

![](https://mmbiz.qpic.cn/mmbiz_png/YicUhk5aAGtDfN365G5W4jOorsPW93ogUBBEaGujydDcJcFbgxiaCicd8DJjIcJic8NFrqvkPd3MbaQjh9KqDxwLhw/640?wx_fmt=png&from=appmsg)

LongWriter-6Kæ•°æ®é›†ç”±6000æ¡â€Required Lengthâ€è¶…è¿‡2000å­—çš„ç”¨æˆ·æŒ‡ä»¤æ„æˆï¼Œæ¥è‡ªäºGLM-4çš„SFTæ•°æ®ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†ä¸ºä¸­æ–‡ã€‚

å¦å¤–ï¼Œä»**WildChat** ä¸­é€‰æ‹©äº†3000æ¡æŒ‡ä»¤ï¼Œä¸»è¦ä¸ºè‹±æ–‡ã€‚

åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œä½¿ç”¨GPT-4oè¿‡æ»¤æ‰æœ‰æ¯’æ•°æ®å¹¶äººå·¥æ£€æŸ¥äº†è‡ªåŠ¨é€‰æ‹©çš„æŒ‡ä»¤ã€‚

æœ€åï¼Œåˆ©ç”¨AgentWriteç”Ÿæˆä¸è¿™äº›instructionå¯¹åº”çš„responseã€‚

![](https://mmbiz.qpic.cn/mmbiz_png/YicUhk5aAGtDfN365G5W4jOorsPW93ogUWq1aU2uW9bcPktmfvHU4PYBtMorMuiclv4HP8LDbdrGZHQ8ZrsHMmYw/640?wx_fmt=png&from=appmsg)

###### **â–³** LongWriterè®­ç»ƒæ•°æ®è¾“å‡ºé•¿åº¦åˆ†å¸ƒ

#### LongWriteræ¨¡å‹è®­ç»ƒä¸è¯„ä¼°

LongWriter-GLM4-9Bæ¨¡å‹è®­ç»ƒä½¿ç”¨GLM4-9Bä½œä¸ºåŸºæ¨¡ï¼Œå°†LongWriter-6kä¸180kçš„GLM-4é€šç”¨chat
SFTæ•°æ®ç»“åˆï¼Œå½¢æˆæ•´ä¸ªè®­ç»ƒé›†ã€‚

LongWriter-6kæœ‰æ•ˆè¡¥å……äº†è¾“å‡ºé•¿åº¦è¶…è¿‡2kå­—çš„é€šç”¨chat SFT æ•°æ®çš„ç¨€ç¼ºæ€§ï¼Œä¸”LongWriter-6kçš„è¾“å‡ºé•¿åº¦åœ¨**2k-10k**
ä¹‹é—´çš„åˆ†å¸ƒç›¸å¯¹å‡åŒ€ã€‚

### è¯„ä»·æŒ‡æ ‡

é’ˆå¯¹è¾“å‡ºé•¿æ–‡æœ¬ä»»åŠ¡ï¼ŒLongWriteræ¨¡å‹é‡‡ç”¨ä¸¤ä¸ªæŒ‡æ ‡ï¼š

  * **è¾“å‡ºé•¿åº¦ï¼ˆSLï¼‰è¯„åˆ†**

  * **è¾“å‡ºè´¨é‡ï¼ˆSQï¼‰è¯„åˆ†**

ä¸ºäº†è®©æ¨¡å‹çš„è¾“å‡ºé•¿åº¦å°½å¯èƒ½æ¥è¿‘æŒ‡ä»¤ä¸­è§„å®šçš„è¦æ±‚ï¼Œä½¿ç”¨äº†åˆ†æ®µçº¿æ€§å‡½æ•°æ¥è®¡ç®—è¾“å‡ºé•¿åº¦å¾—åˆ†ï¼ˆSLï¼‰ï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/YicUhk5aAGtDfN365G5W4jOorsPW93ogUjrGfbSubo3K2cD0lQqVQJr6QaFib15CZw9nuaHr9jPuGD6539licqiaqg/640?wx_fmt=png&from=appmsg)

è¾“å‡ºè´¨é‡SQåˆ™ä½¿ç”¨GPT-4oï¼Œ**ä»ä»¥ä¸‹6ä¸ªç»´åº¦æ¥è¯„ä»·** ï¼š

  * Relevanceï¼Œç›¸å…³æ€§

  * Accuracyï¼Œå‡†ç¡®æ€§

  * Coherenceï¼Œè¿è´¯æ€§

  * Clarityï¼Œæ¸…æ™°åº¦

  * Breadth and Depthï¼Œå¹¿åº¦å’Œæ·±åº¦

  * Reading Experienceï¼Œé˜…è¯»ä½“éªŒ

æ¯ä¸ªç»´åº¦åˆ†å€¼ä¸º1åˆ°5ä¸­çš„æ•´æ•°ï¼Œæœ€ä½åˆ†1ï¼Œæœ€é«˜åˆ†5ï¼›æœ€å6ä¸ªç»´åº¦æ•´ä½“æ±‚å¹³å‡ï¼Œå¹¶ç¼©æ”¾åˆ°100åˆ†ã€‚

è®­ç»ƒ4ä¸ªepochï¼Œå¤§çº¦éœ€è¦ 2,500-3,000 stepã€‚

### å®éªŒç»“æœ

![](https://mmbiz.qpic.cn/mmbiz_png/YicUhk5aAGtDfN365G5W4jOorsPW93ogUs5VDvfImWeCW8VlyfzI9rBkavOkQs7gx0GFXmGc5ymwJVpz2ibibs1Xg/640?wx_fmt=png&from=appmsg)  
![](https://mmbiz.qpic.cn/mmbiz_png/YicUhk5aAGtDfN365G5W4jOorsPW93ogUejooxa15O8srGelSTT1N2oJaDnTucjoVzRwcW5ozMEic4HMWv6icgFGw/640?wx_fmt=png&from=appmsg)

###### **â–³** LongWriterå®éªŒç»“æœ

å¯ä»¥çœ‹åˆ°ï¼ŒLongWriter-9Bç›¸è¾ƒäºGLM4-9B-Chatï¼ŒOverall**ç»å¯¹æå‡12.2ä¸ªç™¾åˆ†ç‚¹**(68.3->80.5)ï¼ŒåŒæ—¶å†å åŠ DPOè®­ç»ƒï¼Œå¯ä»¥æœ‰è¿›ä¸€æ­¥3.5ä¸ªç‚¹çš„æå‡ã€‚

## ä»LongWriter-6kåˆ°LongWrier-6k-filteredï¼šæ•°æ®è´¨é‡æå‡

é€šè¿‡è§‚å¯ŸLongWriter-6kæ•°æ®é›†ï¼Œå›¢é˜Ÿå‘ç°é’ˆå¯¹ä»»åŠ¡çš„è¯„ä¼°æ ‡å‡†ï¼Œè¿™ä¸ªæ•°æ®é›†ä¸­ä»ç„¶æœ‰è¾ƒå¤šçš„æ•°æ®å¹¶ä¸å®Œå…¨ç¬¦åˆç›®æ ‡ä»»åŠ¡çš„è¦æ±‚ã€‚

ä¾‹å¦‚ï¼Œå¤§é‡æ ·æœ¬ä¸­ï¼Œå¯¹è¾“å‡ºé•¿åº¦**æ²¡æœ‰** æ˜ç¡®è¦æ±‚ï¼ˆâ€œRequired Lengthâ€ï¼‰ï¼š

  *   *   *   *   * 

    
    
    {"messages": [  {"role": "user", "content": "è¯·å†™ä¸€ç¯‡å…³äºå±±ä¸œå¤§å­¦å¤–å›½è¯­å­¦é™¢åˆ›æ”¶æƒ…å†µçš„è°ƒç ”æŠ¥å‘Šï¼Œåˆ›æ”¶ä¸»è¦æ¸ é“æœ‰ç»„ç»‡å››å…­çº§ç¬”è¯•é˜…å·åŠå£è¯­è€ƒè¯•é˜…å·"},   {"role": "assistant", "content": "### å±±ä¸œå¤§å­¦å¤–å›½è¯­å­¦é™¢... "}]}  
    

å®é™…è¾“å‡ºé•¿åº¦ï¼ˆResponse Lengthï¼‰ï¼Œä¸promptè¦æ±‚çš„é•¿åº¦ï¼ˆRequired Lengthï¼‰å·®è·è¾ƒå¤§ï¼Œä¾‹å¦‚ï¼š  

  *   * 

    
    
    {"messages": [{"role": "user", "content": "ä½ æ˜¯ä¸€ä½ä¼˜ç§€çš„è¾©æ‰‹ï¼Œè¯·é’ˆå¯¹ä»¥ä¸‹è¾©é¢˜ï¼Œç»™å‡ºè§‚ç‚¹ç«‹è®ºï¼š\nè¾©é¢˜ï¼šå½“ä»£å¤§å­¦ç”Ÿæ˜¯å¦åº”è¯¥ä½æ ¡\nç«‹è®ºè§’åº¦ï¼šé˜è¿°ä¸ä½æ ¡çš„å¥½å¤„\nç«‹è®ºè¦ç‚¹ï¼šè¿ç”¨æ•°æ®ã€äº‹ä¾‹ç­‰è®ºè¯ä½æ ¡çš„å¿…è¦æ€§ï¼›ä»é”»ç‚¼ç‹¬ç«‹èƒ½åŠ›ã€åŸ¹å…»ç¤¾äº¤æŠ€å·§ç­‰æ–¹é¢è®ºè¯è§‚ç‚¹\nå†…å®¹è¦æ±‚ï¼šè¡¨è¾¾æ¸…æ™°ï¼Œè®ºç‚¹çªå‡ºï¼Œç²¾è¾Ÿè§è§£ï¼Œè®©äººä¿¡æœ 20000å­—"}, {"role": "assistant", "content": "### å¼•è¨€ï¼šä½æ ¡ä¸å¦çš„è¾©è®º\n\nå¤§å­¦ç”Ÿæ´»æ˜¯æ¯ä¸ªé’å°‘å¹´æˆé•¿è¿‡ç¨‹ä¸­çš„å…³é”®é˜¶æ®µï¼Œè€Œå½“ä»£å¤§å­¦ç”Ÿæ˜¯å¦åº”è¯¥ä½æ ¡åˆ™æˆä¸ºä¸€ä¸ªå¤‡å—äº‰è®®çš„è¯é¢˜, ..."}], "length": 20000, "response_length": 7739}  
    

â€”â€”å…¶Required Lengthä¸º20000ï¼Œä½†è¾“å‡ºä¸º7739  

æ­¤å¤–è¿˜æœ‰ä¸å°‘æ•°æ®ï¼Œç”±äºè¾“å…¥å†…å®¹**è¢«æ¨¡å‹ç›´æ¥æ‹’ç­”** ï¼Œå¯¼è‡´è¾“å‡ºé•¿åº¦æçŸ­ï¼Œå¯¹äºæ•´ä½“æ•°æ®è´¨é‡æœ‰è¾ƒå¤§çš„æ±¡æŸ“ã€‚

é‰´äºè¿™äº›æ•°æ®å¯¹äºç›®æ ‡ä»»åŠ¡å¯èƒ½é€ æˆçš„åä½œç”¨ï¼Œå›¢é˜Ÿåœ¨LongWriter-6kæ•°æ®åŸºç¡€ä¸Šï¼Œå®æ–½äº†ä¸¤ä¸ªæ•°æ®æ¸…æ´—å‰”é™¤ç­–ç•¥ã€‚

**ç­–ç•¥1**

  * å‰”é™¤promptä¸­å¯¹è¾“å‡ºé•¿åº¦æ²¡æœ‰æ˜ç¡®è¦æ±‚ï¼ˆRequired Lengthï¼‰çš„æ•°æ®

  * æ•°æ®æ€»é‡ï¼š6000æ¡ â†’ 1748æ¡

**ç­–ç•¥2**

  * å‰”é™¤è¾“å‡ºé•¿åº¦å’Œpromptä¸­çš„Required Lengthå·®è·è¾ƒå¤§çš„æ•°æ®ï¼Œå³eval_length scoreâ€”SLå¾—åˆ†å°äº80åˆ†çš„æ•°æ®

  * æ•°æ®æ€»é‡ï¼š1748æ¡ â†’ 666æ¡

######
**![](https://mmbiz.qpic.cn/mmbiz_png/YicUhk5aAGtDfN365G5W4jOorsPW93ogUex6u2I2RxkL5nMyHFG8rI3C1vGtb5Pl7GUaVVz82JicaLTSEQtibQPbQ/640?wx_fmt=png&from=appmsg)â–³**
ç­–ç•¥1è¿‡æ»¤å vs ç­–ç•¥2è¿‡æ»¤åçš„æ•°æ®ç‰¹æ€§

å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç»è¿‡ä¸¤è½®ç­–ç•¥è¿‡æ»¤åçš„æ•°æ®ï¼Œå…¶å®é™…Output Lengthä½“ç°äº†å¯¹äºRequired
Lengthéå¸¸å¥½çš„éµå¾ªèƒ½åŠ›ï¼Œæ•´ä½“æ•°æ®æ ·æœ¬é•¿åº¦å…³è”æ¥è¿‘çº¿æ€§ã€‚

è¿™æ ·ç»è¿‡å¯¹LongWriter-6kæ•°æ®æé™â€œå‹æ¦¨â€ï¼Œæœ€ç»ˆå¾—åˆ°äº†åŒ…å«666æ¡ç»è¿‡æ¸…æ´—åçš„LongWrier-6k-filteredæ•°æ®é›†ï¼Œå¹¶å¼€æºåœ¨ModelScopeã€‚

åŸºäºè¿™ä¸ªæ–°çš„LongWrier-6k-filteredæ•°æ®é›†ï¼Œä¸‹é¢å¼€å§‹æ¢ç´¢ï¼š

> è¿™äº›â€œå°‘è€Œç²¾â€çš„æ•°æ®ï¼Œæ˜¯å¦èƒ½è®­ç»ƒå‡ºæ•ˆæœç›¸å½“ç”šè‡³æ›´ä¸ºå‡ºè‰²LongWriteræ¨¡å‹ã€‚

## åŸºäºä¸åŒæ•°æ®é›†å’Œæ¨¡å‹çš„LongWriterå¾®è°ƒ

ä¸ºäº†éªŒè¯â€œé€šè¿‡åŸºç¡€é•¿è¾“å‡ºæ–‡æœ¬æ•°æ®ï¼Œä»¥åŠç²¾é€‰çš„è¾“å‡ºé•¿åº¦éµå¾ªæ•°æ®ï¼Œæ¥è°ƒæ•™åŸºç¡€æ¨¡å‹çš„é•¿æ–‡å†™ä½œèƒ½åŠ›â€è¿™ä¸€æ–¹æ¡ˆçš„é€šç”¨æ€§ï¼Œå›¢é˜Ÿé€‰æ‹©äº†**Qwen2å’ŒGLM4æ¨¡å‹**
æ¥éªŒè¯ä¸Šè¿°å‡è®¾ã€‚

åŒæ—¶å›¢é˜Ÿè®¤ä¸ºï¼Œå¯¹äºé•¿æ–‡æœ¬å†™ä½œè¿™ä¸€ä»»åŠ¡ï¼Œäººç±»å¯¹é½è¿‡çš„chatæˆ–instructæ¨¡å‹å·²ç»æä¾›äº†ä¸€ä¸ªè¾ƒå¥½çš„åŸºå‡†ï¼Œæ•…å¯èƒ½ä¸éœ€è¦å®Œå…¨baseæ¨¡å‹å¹¶å¸¦ä¸Šå…¨é‡çš„chat
SFTæ•°æ®å¼€å§‹è®­ç»ƒã€‚

æ‰€ä»¥å›¢é˜Ÿåˆ†åˆ«é€‰ç”¨äº†Qwen2-7b-instructå’ŒGLM4-9B-Chatæ¨¡å‹ä½œä¸ºè®­ç»ƒçš„åŸºå‡†æ¨¡å‹ã€‚

å½“ç„¶è¿˜æœ‰ä¸€ä¸ªåŸå› æ˜¯ï¼Œå›¢é˜Ÿç¡®å®ä¹Ÿæ²¡æœ‰Qwen2æˆ–GLM4çš„å®Œæ•´SFTæ•°æ®ï¼ˆdogeï¼‰ã€‚

åœ¨ä¸åŒçš„å®éªŒé‡Œï¼Œå›¢é˜Ÿé€‰ç”¨çš„æ•°æ®é›†ï¼Œé™¤äº†LongWrier-6kå’ŒLongWrier-6k-filteredä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬äº†ï¼š

Qwen2-72B-Instructç”Ÿæˆå¹¶ç»è¿‡ç­›é€‰çš„200kä¸­æ–‡ä»¥åŠè‹±æ–‡å¯¹è¯æ•°æ®é›†Magpie-Qwen2-Pro-200K-Chineseå’ŒMagpie-
Qwen2-Pro-200K-Englishã€‚

åœ¨losså‡½æ•°çš„é€‰æ‹©æ–¹é¢ï¼Œä½¿ç”¨äº†**â€œlong-ceâ€losså‡½æ•°** ï¼Œè¿™ä¸åŸå§‹LongWriteræ–‡ç« ä¸­é‡‡ç”¨çš„ç­–ç•¥ç›¸åŒï¼š

> ä¸ºé¿å…é•¿è¾“å‡ºæ•°æ®ä¸­æ¯ä¸ªtarget tokenå¯¹æŸå¤±çš„è´¡çŒ®ä½äºçŸ­è¾“å‡ºçš„é—®é¢˜ï¼Œlong-ce lossé€šè¿‡è®¡ç®—è¯¥æ‰¹æ¬¡ä¸­æ‰€æœ‰target
> tokençš„average lossæ¥è·å¾—ã€‚

åŸºäº**ModelScope Swifté¡¹ç›®** æä¾›çš„å¤šæ•°æ®é›†æ··åˆèƒ½åŠ›ï¼Œæ•°æ®æ··åˆçš„è®­ç»ƒå¾®è°ƒéƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªå‘½ä»¤è¡Œå®Œæˆã€‚

ä¾‹å¦‚ï¼Œå¦‚ä¸‹å‘½ä»¤å®Œæˆçš„æ˜¯å°†longwriter-6k-filteredã€Qwen2-Pro-200K-Chineseå’ŒQwen2-Pro-200K-Englishä¸‰ä¸ªæ•°æ®é›†æŠ½æ ·åæŒ‰è‡ªå®šä¹‰æ··åˆï¼ˆåŒ…æ‹¬éšæœºæŠ½æ ·ï¼‰ç­–ç•¥ï¼Œä½¿ç”¨long-
ce lossæ¥è¿›è¡ŒSFTï¼š

  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   * 

    
    
    swift sft \    --model_type qwen2-7b-instruct \    --dataset longwriter-6k-filtered qwen2-pro-zh#6660 qwen2-pro-en#6660 \    --max_length 28672 \    --num_train_epochs 2 \    --eval_steps 200 \    --batch_size 1 \    --gradient_accumulation_steps 64 \    --gradient_checkpointing true \    --warmup_ratio 0.1 \    --learning_rate 1e-5 \    --sft_type full \    --loss_name long-ce \    --check_dataset_strategy warning \    --save_only_model false \    --save_total_limit -1 \    --lazy_tokenize true \    --dataloader_num_workers 1 \    --resume_only_model true \    --neftune_noise_alpha 5 \Â Â Â Â --use_flash_attnÂ true

åŒæ—¶éµç…§LongWriter paperå®šä¹‰çš„è¾“å‡ºé•¿åº¦ï¼ˆSLï¼‰å’Œ è¾“å‡ºè´¨é‡ï¼ˆSQï¼‰è¯„åˆ†ï¼Œå¯ä»¥åŸºäºEvalScopeæ¡†æ¶æ¥è¿›è¡Œç›¸å…³è¯„æµ‹ã€‚

åœ¨è¯„æµ‹è¿‡ç¨‹ä¸­ï¼Œå¯¹äºæ¨¡å‹æ¨ç†çš„é…ç½®ä¸ºrepetition_penalty=1.1, temperature=0.5ã€‚

**LongWriterè¯„æµ‹ï¼š**

  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   * 

    
    
     # pip install evalscope[framework]  
    # é…ç½®ä»»åŠ¡# `infer`--æ¨ç†é˜¶æ®µï¼›`eval_l`--lengthåˆ†æ•°è¯„ä¼°ï¼›`eval_q`ï¼šqualityåˆ†æ•°è¯„ä¼°task_cfg = dict(stage=['infer', 'eval_l', 'eval_q'],                model='ZhipuAI/LongWriter-glm4-9b',                input_data_path=None,                output_dir='./outputs',                openai_api_key=None,                openai_gpt_model='gpt-4o-2024-05-13',                infer_generation_kwargs={                    'max_new_tokens': 32768,                    'temperature': 0.5                },                eval_generation_kwargs={                    'max_new_tokens': 1024,                    'temperature': 0.5,                    'stop': None                },                proc_num=8)  
    # æäº¤è¯„æµ‹from evalscope.third_party.longbench_write import run_taskrun_task(task_cfg=task_cfg)

### è®­ç»ƒé…ç½®

  * ç¡¬ä»¶ç¯å¢ƒï¼šNVIDIA A100 x 4

  * åˆå§‹å­¦ä¹ ç‡ï¼š1e-5

  * batch sizeï¼š1ï¼Œå¼€å¯æ¢¯åº¦ç´¯åŠ 

### æ¨¡å‹æ•ˆæœè¯„ä¼°

#### åŸºäºQwen2-7b-instruct

å›¢é˜Ÿé¦–å…ˆä½¿ç”¨Qwen2-7b-instructä½œä¸ºåŸºç¡€æ¨¡å‹ï¼Œæ¥å¾®è°ƒç”ŸæˆLongWriteræ¨¡å‹ã€‚å®éªŒè®¾è®¡å¦‚ä¸‹ï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/YicUhk5aAGtDfN365G5W4jOorsPW93ogUSV8rOiczYKMt4MHdRNrusExDMsJhR5tOZnCiaEy55Kp51sMphPgbRgicQ/640?wx_fmt=png&from=appmsg)

é€šè¿‡ä¸Šè¿°å®éªŒå¯ä»¥çœ‹å‡ºï¼Œé’ˆå¯¹éµå¾ªæŒ‡ä»¤è¿›è¡Œé•¿æ–‡æœ¬å†™ä½œè¿™ä¸ªä»»åŠ¡ï¼Œä½¿ç”¨â€œå°‘è€Œç²¾â€çš„æ•°æ®ï¼Œå¯¹äºæ¨¡å‹æœ€ç»ˆçš„æ€§èƒ½è‡³å…³é‡è¦ã€‚

äº‹å®ä¸Šï¼Œåœ¨å®éªŒ3ä¸­ï¼Œ**åªé€šè¿‡LongWriter-6k-filteredæ•°æ®é›†4ä¸ªepochè®­ç»ƒ**
ï¼Œæ€»å…±2.6Kæ¡æ•°æ®ï¼Œå…¶è®­ç»ƒå‡ºæ¥çš„æ¨¡å‹ï¼Œæ— è®ºåœ¨å†™ä½œé•¿åº¦ï¼Œè¿˜æ˜¯å†™ä½œè´¨é‡ä¸Šï¼Œéƒ½æ˜¾è‘—ä¼˜äºLongWriter-6k + 180kçš„é€šç”¨æ•°æ®æ··åˆè®­ç»ƒçš„æ¨¡å‹ã€‚

åŒæ—¶ï¼Œåœ¨å®éªŒ3ä½¿ç”¨çš„LongWriter-6k-filteredæ•°æ®é›†åŸºç¡€ä¸Šï¼Œå®éªŒ4å†æ·»åŠ 1:20æ··åˆçš„é€šç”¨æ•°æ®é›†ï¼Œæ€»å…±13.6Kæ•°æ®è®­ç»ƒ2ä¸ªepochï¼Œèƒ½è¿›ä¸€æ­¥è·å¾—æ›´å¥½çš„ç»“æœã€‚

Qwen2-7b-instructçš„è¿™ä¸ªç»“æœï¼Œä¹ŸéªŒè¯äº†ä½¿ç”¨LongWriter-6k-filteredæ•°æ®é›†æ¥å¾®è°ƒé•¿æ–‡æœ¬å†™ä½œèƒ½åŠ›ï¼Œ**å…·æœ‰ä¸€å®šçš„é€šç”¨æ€§**
ï¼Œä¸åªå±€é™äºGLM4ç³»åˆ—æ¨¡å‹ã€‚

æ­¤å¤–ï¼Œå¦‚åŒLongWriterè®ºæ–‡é‡Œå±•ç¤ºçš„ä¸€æ ·ï¼Œåœ¨å†™ä½œè´¨é‡æ–¹é¢ï¼Œå¢å¼ºäº†é•¿æ–‡æœ¬èƒ½åŠ›çš„æ¨¡å‹ï¼Œåœ¨è´¨é‡ä¸Šæœ‰å°å¹…åº¦çš„æ³¢åŠ¨(-1.47ç‚¹)ã€‚

åœ¨è¿™äº›å®éªŒé‡Œï¼Œæœ€ç»ˆé€‰æ‹©äº†**å®éªŒ4** äº§å‡ºçš„æ¨¡å‹ä½œä¸º**MS-LongWriter-Qwen2-7b-instruct**
,å¹¶å¼€æºåˆ°ModelScopeã€‚

![](https://mmbiz.qpic.cn/mmbiz_png/YicUhk5aAGtDfN365G5W4jOorsPW93ogUex6u2I2RxkL5nMyHFG8rI3C1vGtb5Pl7GUaVVz82JicaLTSEQtibQPbQ/640?wx_fmt=png&from=appmsg)

å›¾6å±•ç¤ºäº†è®­ç»ƒå®šåˆ¶å‰åçš„æ¨¡å‹ï¼Œåœ¨è¾“å‡ºæ–‡æœ¬éµå¾ªæŒ‡å®šé•¿åº¦æ–¹é¢çš„å¯¹æ¯”ã€‚

å¯ä»¥çœ‹åˆ°ï¼Œè®­ç»ƒåçš„æ¨¡å‹çš„æ–‡æœ¬è¾“å‡ºé•¿åº¦ï¼Œèƒ½æ›´å¥½çš„è´´åˆpromptçš„è¦æ±‚ï¼Œç‰¹åˆ«æ˜¯åœ¨è¦æ±‚è¾“å‡ºçš„æ–‡æœ¬é•¿åº¦è¾ƒé•¿çš„æ—¶å€™ã€‚

#### åŸºäºGLM4-9b-Chat

æ¥ä¸‹æ¥ï¼Œå›¢é˜ŸæŠŠLongWriter-6k-filteredæ•°æ®é›†ï¼Œä»¥åŠå¯¹åº”å¾®è°ƒå®šåˆ¶æ¨¡å‹çš„æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯ä¸Šè¿°å®éªŒ4çš„é…ç½®ï¼‰ï¼Œä¹Ÿä»¥GLM4-9b-Chatæ¨¡å‹ä½œä¸ºåŸºåº§è¿›è¡Œäº†å®šåˆ¶è®­ç»ƒï¼Œå¹¶ä¸”ä¸LongWriter-
GLM4-9Bç»“æœåšäº†å¯¹æ¯”ã€‚

å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/YicUhk5aAGtDfN365G5W4jOorsPW93ogUUsjtbDwbI0EyX0LTiaYDO8XkibiaNMmDicOkiaBpkwIHzSibW5dUPaYSgOgw/640?wx_fmt=png&from=appmsg)

å¯ä»¥çœ‹åˆ°åŸºäºå®éªŒ4çš„é…ç½®ï¼Œä½¿ç”¨GLM4-9b-Chatä½œä¸ºåŸºç¡€ï¼Œæ€»å…±ä½¿ç”¨äº†**13.6Kæ•°æ®ï¼Œè®­ç»ƒ2 epoch** ï¼›è€ŒåŸå§‹LongWriter-
GLM4-9Bä½¿ç”¨**186Kæ•°æ®ï¼Œè®­ç»ƒ4 epoch** ã€‚

å®éªŒ4è®­ç»ƒç”¨çš„æ€»æ•°æ®é‡åœ¨ä»…ä¸ºåŸå§‹LongWriter-GLM4-9Bè®­ç»ƒä½¿ç”¨æ•°æ®é‡7.5%ï¼ˆå®é™…æ¶ˆè€—è®¡ç®—èµ„æºä¸º3.7%ï¼‰çš„æƒ…å†µä¸‹ï¼Œè·å–äº†ç±»ä¼¼çš„æ•ˆæœã€‚

å½“ç„¶è¿™é‡Œä¸€ä¸ªæ˜¾è‘—çš„åŒºåˆ†ç‚¹ï¼Œæ˜¯å›¢é˜Ÿæ˜¯ä»¥GLM4-9b-Chatä½œä¸ºè®­ç»ƒçš„åŸºç¡€ã€‚

è€ƒè™‘åˆ°åŸå§‹è®ºæ–‡ä¸­ä½¿ç”¨çš„æ˜¯GLM4-9b baseæ¨¡å‹ä½œä¸ºåŸºåº§ï¼Œå®¢è§‚ä¸Šç¡®å®éœ€è¦æ›´å¤šé€šç”¨å¯¹é½æ•°æ®é›†ã€‚

ä½†å¦‚åŒä¹‹å‰è®¨è®ºçš„ï¼Œå¯¹äºéµå¾ªæŒ‡ä»¤è¿›è¡Œé•¿æ–‡æœ¬å†™ä½œè¿™ä¸ªå…·ä½“ä»»åŠ¡ï¼Œä»baseæ¨¡å‹å¼€å§‹è®­ç»ƒå¯èƒ½å¹¶ä¸å¿…è¦ã€‚

åœ¨è¿™äº›å®éªŒé‡Œï¼Œæœ€ç»ˆé€‰æ‹©äº†å®éªŒ4äº§å‡ºçš„æ¨¡å‹ä½œä¸ºMS-LongWriter-GLM4-9B-Chatï¼Œå¹¶å¼€æºåˆ°ModelScopeã€‚

#### åŸºäºQwen2.5-7b-instruct

åœ¨å›¢é˜Ÿçš„è¿™ä¸ªæ¢ç´¢æ¥è¿‘å°¾å£°ä¹‹æ—¶ï¼Œ**Qwenæ¨¡å‹å®¶æ—æ­£å¼æ¨å‡ºQwen2.5ç³»åˆ—** ã€‚

ç›¸æ¯”Qwen2ç³»åˆ—ï¼ŒQwen2.5æ”¯æŒçš„è¾“å‡ºé•¿åº¦æœ‰äº†è¾ƒå¤§çš„æå‡ã€‚å›¢é˜Ÿä¹Ÿåœ¨ç¬¬ä¸€æ—¶é—´åŸºäº**Qwen2.5-7B-Instruct**
æ¨¡å‹åšäº†åˆæ­¥çš„å®éªŒï¼Œç»“æœå¦‚ä¸‹ï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/YicUhk5aAGtDfN365G5W4jOorsPW93ogUOHMbZcb8Tq7Rawx7SNsibWJootxylxicETKZcmMN5wJ4x6xDekr0Vj5g/640?wx_fmt=png&from=appmsg)

å¯¹æ¯”ä¸Šè¿°è¡¨æ ¼ï¼Œå¯ä»¥æ¸…æ™°çœ‹åˆ°ï¼Œ**æœªç»å®šåˆ¶**
çš„Qwen2.5-7B-Instructæ¨¡å‹åœ¨éµå¾ªæŒ‡ä»¤è¿›è¡Œé•¿æ–‡æœ¬å†™ä½œçš„è¾“å‡ºé•¿åº¦ï¼ˆSLï¼‰æ–¹é¢çš„è¯„åˆ†ï¼Œæ— è®ºæ˜¯å¯¹æ¯”Qwen2-7B-Instructï¼Œè¿˜æ˜¯GLM4-9b-Chatï¼Œéƒ½å·²ç»æœ‰äº†è¾ƒå¤§çš„æå‡ã€‚

è€Œé€šè¿‡å®éªŒ4çš„13.6Kæ¡æ•°æ®2ä¸ªepochçš„å®šåˆ¶è®­ç»ƒï¼Œæ¨¡å‹ç»¼åˆæŒ‡æ ‡ï¼ˆS-avgï¼‰å°±å·²ç»è¾¾åˆ°è¾¾åˆ°æœ€ä½³ã€‚åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œé¢å¤–è¿›è¡Œäº†åŸºäºLongWriter-6k-filtered
666 æ¡æ•°æ®çš„2ä¸ªepoché€€ç«è®­ç»ƒï¼Œåˆ™**åœ¨SL, SQå’ŒS-avgå‡ ä¸ªæŒ‡æ ‡ä¸Šéƒ½å…¨é¢è¶…è¶Šäº†å…¶ä»–æµ‹è¯•æ¨¡å‹** ã€‚

å…¶ä¸­å…·ä½“å®éªŒ5çš„é€€ç«(annealing)è®­ç»ƒçš„å‘½ä»¤è¡Œå¦‚ä¸‹ï¼š

  *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   *   * 

    
    
    CUDA_VISIBLE_DEVICES=0,1,2,3 nohup swift sft \    --model_type qwen2_5-7b-instruct \    --dataset longwriter-6k-filtered#666 \    --max_length 28672 \    --num_train_epochs 2 \    --eval_steps 200 \    --batch_size 1 \    --gradient_accumulation_steps 64 \    --gradient_checkpointing true \    --warmup_ratio 0.1 \    --learning_rate 2e-6 \    --sft_type full \    --loss_name long-ce \    --check_dataset_strategy warning \    --save_only_model false \    --save_total_limit -1 \    --lazy_tokenize true \    --dataloader_num_workers 1 \    --resume_only_model true \    --neftune_noise_alpha 5 \    --use_flash_attn true \    --resume_from_checkpoint {previous-checkpoint-path} > {output-checkpoint-path}  
    

æœ€ç»ˆé‡‡å–å®éªŒ5çš„äº§å‡ºæ¨¡å‹ï¼Œä½œä¸ºMS-LongWriter-Qwen2.5-7B-Instructå¼€æºåˆ°äº†ModelScopeã€‚

#### å¾®è°ƒå¯¹äºåŸºç¡€èƒ½åŠ›çš„å½±å“

æœ€åï¼Œä¸ºè¯„ä¼°é’ˆå¯¹éµå¾ªæŒ‡ä»¤è¿›è¡Œé•¿æ–‡æœ¬å†™ä½œä»»åŠ¡å®šåˆ¶çš„æ¨¡å‹ï¼Œåœ¨åŸºç¡€èƒ½åŠ›ä¸Šæ˜¯å¦å­˜åœ¨é€€åŒ–ï¼Œåœ¨mmluã€cevalã€ARC_cã€gsm8kä¸Šï¼Œä½¿ç”¨EvalScopeå¯¹äºMS-
LongWriter-Qwen2-7b-instructè¿›è¡Œäº†è¯„ä¼°ã€‚

é€šè¿‡swiftæ¥å£ä¸EvalScopeçš„å¯¹æ¥ï¼Œå¯ä»¥ä¸€é”®å®Œæˆæ¨¡å‹éƒ¨ç½²ï¼Œæ¨ç†å’Œè¯„ä¼°æµç¨‹ã€‚

ä¾‹å¦‚å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤ï¼Œå®Œæˆå¯¹äºQwen2-7b-instructçš„åŸºç¡€èƒ½åŠ›è¯„ä¼°ï¼š

  * 

    
    
    CUDA_VISIBLE_DEVCIES=0 swift eval --model_type qwen2-7b-instruct --eval_dataset mmlu ceval ARC_c gsm8k

â€æ¯”è¾ƒå‡ ä¸ªæ¨¡å‹åœ¨åŸºç¡€benchamrkä¸Šçš„å¾—åˆ†ï¼Œç»“æœå¦‚ä¸‹ï¼š

![](https://mmbiz.qpic.cn/mmbiz_png/YicUhk5aAGtDfN365G5W4jOorsPW93ogUhbwusYjNicgIGrWznNPE0aoZEuQyiagpyJiaPlJp3FCHFpZyEokibA9yXQ/640?wx_fmt=png&from=appmsg)

å¯ä»¥çœ‹åˆ°ï¼Œé’ˆå¯¹éµå¾ªæŒ‡ä»¤è¿›è¡Œé•¿æ–‡æœ¬å†™ä½œä»»åŠ¡å®šåˆ¶å¾®è°ƒçš„æ¨¡å‹ï¼Œé™¤äº†åœ¨cevalä¸Šæœ‰ä¸€äº›æå‡ï¼Œåœ¨å…¶ä»–é€šç”¨ä»»åŠ¡ï¼Œå°¤å…¶æ˜¯åé€»è¾‘æ¨ç†çš„benchmarkä¸Šï¼Œèƒ½åŠ›è¿˜æ˜¯ä¼šæœ‰ä¸€å®šçš„regressionï¼Œä¾‹å¦‚åœ¨MMLUä¸Šçš„æ‰ç‚¹æ˜¯è¾ƒä¸ºæ˜æ˜¾çš„ã€‚

## ç»“è®º

æ€»ä½“æ¥çœ‹ï¼Œå¤šç§è¯æ®è¡¨æ˜ï¼Œé’ˆå¯¹éµå¾ªæŒ‡ä»¤è¿›è¡Œé•¿æ–‡æœ¬å†™ä½œè¿™ä¸ªä»»åŠ¡ï¼Œè¦æ¥è®­ç»ƒå®šåˆ¶æ¨¡å‹ï¼Œè®­ç»ƒæ•°æ®çš„è´¨é‡ï¼Œä¼šæ¯”æ•°é‡æ›´åŠ é‡è¦ã€‚

ä¸”åœ¨è¿™ä¸ªä»»åŠ¡ä¸Šï¼Œå¯èƒ½ä»å¯¹é½çš„chatæˆ–instructæ¨¡å‹å¼€å§‹è®­ç»ƒï¼Œä¼šæ¯”ä»æœªå¯¹é½çš„baseæ¨¡å‹å¼€å§‹è®­ç»ƒæ›´åŠ ç»æµã€‚

åœ¨è¿™ä¸ªæœ€ä½³å®è·µä¸­ï¼Œå¾—ç›ŠäºModelScope Swiftè®­ç»ƒå·¥å…·å’ŒEvalScopeè¯„ä¼°å·¥å…·ï¼Œå›¢é˜Ÿå¾ˆæ–¹ä¾¿çš„è¿›è¡Œäº†å„ç§ä¸åŒçš„å¯¹æ¯”å®éªŒã€‚

æœ¬æ–‡ä¸­ä½¿ç”¨åˆ°çš„å¼€æºå·¥å…·åŒ…æ‹¬ï¼š

  * **æ¨¡å‹è®­ç»ƒå¾®è°ƒæ¡†æ¶ï¼šMS-Swift**

  * **æ¨¡å‹è¯„ä¼°å·¥å…·ï¼šEvalScope**

å¹¶ä¸”é€šè¿‡åŸºäºchatå’Œinstructæ¨¡å‹ä½œä¸ºèµ·ç‚¹ï¼Œåªä½¿ç”¨ç›¸æ¯”åŸå§‹LongWriteè®­ç»ƒæ‰€éœ€çš„3.7%çš„æ•°æ®å’Œè®¡ç®—æ¶ˆè€—ï¼Œå°±åœ¨Qwen2-7b-instructå’ŒGLM4-9b-Chatä¸Šï¼Œåœ¨é•¿æ–‡æœ¬æ’°å†™ä»»åŠ¡ä¸Šéƒ½è·å¾—äº†å’ŒåŸpaperé‡Œå‡ ä¹ä¸€è‡´çš„æ•ˆæœæå‡ï¼ˆ12ptå·¦å³ï¼‰ã€‚

è€Œåœ¨Qwen2.5-7b-instructæœ¬èº«æä¾›äº†è¾ƒå¥½é•¿æ–‡æœ¬è¾“å‡ºèƒ½åŠ›çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡åŒæ ·å°‘é‡é«˜è´¨é‡æ•°æ®çš„è®­ç»ƒå®šåˆ¶ï¼Œåœ¨è¿™ä¸ªä»»åŠ¡ä¸Šï¼Œèƒ½å…¨æ–¹ä½è·å¾—æœ€ä½³çš„æ•ˆæœã€‚

å›¢é˜Ÿè®­ç»ƒä½¿ç”¨çš„æ•°æ®ï¼Œä»¥åŠæœ€åè¾“å‡ºçš„æ¨¡å‹ï¼Œç›®å‰éƒ½å¼€æºåˆ°äº†ModelScopeã€‚

å‚è€ƒèµ„æ–™ï¼š

1ã€LongWriter: Unleashing 10,000+ Word Generation from Long Context LLMs, Bai
et al. 2024  
2ã€Magpie: Alignment Data Synthesis from Scratch by Prompting Aligned LLMs with
Nothing, Xu et al. 2024  
3ã€LIMA: Less Is More for Alignment, Zhou et al. 2023  
4ã€InstructionGPT-4: A 200-Instruction Paradigm for Fine-Tuning MiniGPT-4, Wei
et al. 2023  
5ã€Qwen2 Technical Report, Yang et al. 2024  
6ã€ChatGLM: A Family of Large Language Models from GLM-130B to GLM-4 All Tools,
ZhipuAI 2024  
  

æ–‡ä¸­ä½¿ç”¨åˆ°çš„å¼€æºå·¥å…·æ¡†æ¶ï¼š  
æ¨¡å‹è®­ç»ƒå¾®è°ƒæ¡†æ¶MS-Swiftï¼šhttps://github.com/modelscope/ms-swift  
æ¨¡å‹è¯„ä¼°å·¥å…·EvalScopeï¼šhttps://github.com/modelscope/evalscope/

  
ç²¾ç­›åçš„666æ¡æ•°æ®é›†æ„æˆçš„LongWriter-6K-Filteredæ•°æ®é›†ï¼š

https://www.modelscope.cn/datasets/swift/longwriter-6k-filtered

è®­ç»ƒå¾®è°ƒåå¼€æºçš„é•¿æ–‡æœ¬æ¨¡å‹ï¼š

MS-LongWriter-Qwen2.5-7b-instructï¼š  
https://www.modelscope.cn/models/swift/MS-LongWriter-Qwen2.5-7B-Instruct

MS-LongWriter-Qwen2-7b-instructï¼š  
https://www.modelscope.cn/models/swift/MS-LongWriter-Qwen2-7B-Instruct  
MS-LongWriter-GLM4-9B-Chatï¼š  
https://www.modelscope.cn/models/swift/MS-LongWriter-GLM4-9B-Chat

  
åŸå§‹å¼€æºçš„LongWriter-GLM4-9Bæ¨¡å‹ï¼š  
https://www.modelscope.cn/models/ZhipuAI/LongWriter-glm4-9b

å…¶ä»–ç›¸å…³æ•°æ®é›†

WildChatï¼š  
https://www.modelscope.cn/datasets/thomas/WildChat

Magpie-Qwen2-Pro-200K-Chineseï¼š  
https://modelscope.cn/datasets/AI-ModelScope/Magpie-Qwen2-Pro-200K-Chinese  
Magpie-Qwen2-Pro-200K-Englishï¼š  
https://modelscope.cn/datasets/AI-ModelScope/Magpie-Qwen2-Pro-200K-English  
  

â€” **å®Œ** â€”

  

æŠ•ç¨¿è¯·å‘é‚®ä»¶åˆ°ï¼š

**ai@qbitai.com**

æ ‡é¢˜æ³¨æ˜ã€æŠ•ç¨¿ã€‘ï¼Œå‘Šè¯‰æˆ‘ä»¬ï¼š

ä½ æ˜¯è°ï¼Œä»å“ªæ¥ï¼ŒæŠ•ç¨¿å†…å®¹â€

é™„ä¸Šè®ºæ–‡/é¡¹ç›®ä¸»é¡µé“¾æ¥ï¼Œä»¥åŠè”ç³»æ–¹å¼å“¦

æˆ‘ä»¬ä¼šï¼ˆå°½é‡ï¼‰åŠæ—¶å›å¤ä½ 

![](https://mmbiz.qpic.cn/mmbiz_gif/YicUhk5aAGtC5nGy7YMGhQ0ZJeyibWyL0KVCtiaLEPMyd4Bszuo0bFIOxZOvdmqdxnOosYXyu5aI7MXpyUrUWfz6g/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1)

  

**ç‚¹è¿™é‡Œ ğŸ‘‡å…³æ³¨æˆ‘ï¼Œè®°å¾—æ ‡æ˜Ÿå“¦ï½**

**ä¸€é”®ä¸‰è¿ã€Œåˆ†äº«ã€ã€ã€Œç‚¹èµã€å’Œã€Œåœ¨çœ‹ã€**

**ç§‘æŠ€å‰æ²¿è¿›å±•æ—¥æ—¥ç›¸è§ ~**

![](https://mmbiz.qpic.cn/mmbiz_svg/g9RQicMD01M0tYoRQT2cMQRmPS5ZDyrrfzeksiay90KaDzlGBH61icqHxmgFKfvfXtVuwTHV740CDLAaXU1LIfZyoJEpYKcRIiaE/640?wx_fmt=svg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

