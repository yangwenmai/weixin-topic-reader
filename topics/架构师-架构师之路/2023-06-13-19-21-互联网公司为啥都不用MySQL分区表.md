# 互联网公司为啥都不用MySQL分区表？

文章作者: 架构师之路
发布时间: 2023-06-13 19:21
发布地: 北京
原文链接: http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651972127&idx=1&sn=b6c88c0132c0193f8e35c59b906f39f3&chksm=bd2d57c38a5aded5ee18dfb014ba1c519c853c0af3b9fc3c37a34cab1de70130e6763edece90#rd

封面图链接: https://mmbiz.qpic.cn/sz_mmbiz_jpg/YrezxckhYOzX2BfJupfL9RfeVCqCryhEzSQws9PWPQRx8EaKyLSV1CdIUIicxIOy3yry6EZaZvbbkjX4tlJw2icA/300

**潜在场景如何？**  

当MySQL单表的数据量过大时，数据库的访问速度会下降，“数据量大”问题的常见解决方案是“水平切分”。

  

**MySQL常见的水平切分方案有哪些？**

（1）分库分表；

（2）分区表。

  

**什么是分库分表？**

把一个很大的库（表）的数据分到几个库（表）中，每个库（表）的结构都相同，但他们可以分布在不同的MySQL实例，甚至不同的物理机器上，以达到降低单库（表）数据量，提高读写性能的目的。

  

**分库分表有什么缺点？**

分库分表往往是业务层实施的，分库分表后，往往需要升级系统：

（1）修改某些SQL代码；

（2）丧失某些SQL功能。

  

**什么是分区表？**

所有数据，逻辑上还在一个表中，但物理上，可以根据一定的规则放在不同的文件中。这是MySQL5.1之后支持的功能，业务代码无需改动。

  

分区表看上去很帅气，**为什么大部分互联网公司不使用，而更多的选择分库分表来进行水平切分呢？**

分区表的一些缺点，是大数据量，高并发量的业务难以接受的：

（1）如果SQL不走分区键，很容易出现全表锁；

（2）在分区表实施关联查询，就是一个灾难；

（3）分库分表，自己掌控业务场景与访问模式，可控；分区表，工程师写了一个SQL，自己无法确定MySQL是怎么玩的，不可控；

 _画外音：类似于，不要把业务逻辑实现在存储过程，用户自定义函数，触发器里，而要实现在业务代码里一样。_

（4）DBA给OP埋坑，容易大打出手，造成同事矛盾；

（5）…

  

当然，在数据量和并发量不太大，或者按照时间来存储冷热数据或归档数据的一些特定场景下，分区表还是有上场机会的。

 _画外音：例如，按照时间分区，存储日志。_

  

希望这一分钟有收获。架构师之路-分享通俗易懂的技术文章**近期文章：**
《[交个朋友，她来了...](http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651972104&idx=1&sn=06a6a320efa0d682e656ba168b4aab3f&chksm=bd2d57d48a5adec2c752dff4d316ec61f30ed78ff560c3100d728e4e0dd8e0deceebcc1ea015&scene=21#wechat_redirect)》**  
****调研** ：你使用分库分表，还是分区表呢？你在什么场景使用分区表？

